# Import necessary libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.datasets import load_iris
import seaborn as sns

# Load the Iris dataset
iris = load_iris()
data = pd.DataFrame(data=iris.data, columns=iris.feature_names)
data['species'] = iris.target

# Display the first few rows of the dataset
print(data.head())

# Explore the structure of the dataset
print(data.info())
print(data.describe())

# Check for missing values
print(data.isnull().sum())

# Since there are no missing values, we don't need to clean the dataset

# Compute basic statistics of the numerical columns
print(data.describe())

# Perform groupings on the categorical column 'species' and compute the mean of a numerical column for each group
grouped_data = data.groupby('species')[['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)']].mean()
print(grouped_data)

# Create a bar chart showing the comparison of a numerical value
plt.figure(figsize=(10, 6))
sns.barplot(x='species', y='petal length (cm)', data=data)
plt.title('Average Petal Length per Species')
plt.xlabel('Species')
plt.ylabel('Average Petal Length (cm)')
plt.show()

# Create a histogram of a numerical column to understand its distribution
plt.figure(figsize=(10, 6))
sns.histplot(data['sepal length (cm)'], bins=10, kde=True)
plt.title('Histogram of Sepal Length')
plt.xlabel('Sepal Length (cm)')
plt.ylabel('Frequency')
plt.show()

# Create a scatter plot to visualize the relationship between two numerical columns
plt.figure(figsize=(10, 6))
sns.scatterplot(x='sepal length (cm)', y='petal length (cm)', data=data)
plt.title('Scatter Plot of Sepal Length vs. Petal Length')
plt.xlabel('Sepal Length (cm)')
plt.ylabel('Petal Length (cm)')
plt.show()

# Create a scatter plot with different colors for each species
plt.figure(figsize=(10, 6))
for i in range(3):
    species_data = data[data['species'] == i]
    plt.scatter(species_data['sepal length (cm)'], species_data['petal length (cm)'], label=iris.target_names[i])
plt.title('Scatter Plot of Sepal Length vs. Petal Length by Species')
plt.xlabel('Sepal Length (cm)')
plt.ylabel('Petal Length (cm)')
plt.legend()
plt.show()

# Error handling for file reading
try:
    # Attempt to read the file
    data = pd.read_csv('iris.csv')
except FileNotFoundError:
    print("The file was not found.")
except pd.errors.EmptyDataError:
    print("The file is empty.")
except pd.errors.ParserError:
    print("Error parsing the file.")

# Error handling for missing values
try:
    # Attempt to fill missing values
    data.fillna(data.mean(), inplace=True)
except Exception as e:
    print(f"An error occurred: {e}")

# Error handling for incorrect data types
try:
    # Attempt to convert a column to numeric
    data['sepal length (cm)'] = pd.to_numeric(data['sepal length (cm)'])
except Exception as e:
    print(f"An error occurred: {e}")